# Подготовка
## Ссылки
Ссылка на image RabbitMQ для докера https://hub.docker.com/_/rabbitmq/  
Ссылка на документацию RabbitMQ https://www.rabbitmq.com/tutorials  
Ссылка на Docker Desktop https://www.docker.com/products/docker-desktop/

## Установка RabbitMQ на Docker
1. Установливаем Docker Desktop
2. Запускаем движок докера
3. Создаём папку для окружения, например forum_stand:
    - `mkdir slurm_stand3`
    - `cd slurm_stand3`
4. Создаём файл docker-compose.yml со следующим содержимым:  
   `version: "2.1"  
   services:  
     rabbitmq:  
       image: rabbitmq:3.10.7-management  
       ports:  
         - 15672:15672  
         - 5672:5672
   `
5. Запускаем стенд командой: `docker-compose up -d`
6. Проверяем, что докер работает по ссылке http://127.0.0.1:15672/

## Доработка бэкэнда
1. Устанавливаем библиотеку `pika`
2. В папке app создаём в модуля: `messageHandler.py` и `messageSender.py`
3. В модуле `messageHandler.py`:
   - создаём класс `MessageHandler`
   - для него создаём метод `__init__`, в котором устанавливаем параметры подключения к брокеру RabbitMQ
   - создаём канал для подключения к брокеру и запускаем "прослушку" канала
   - создаём метод `callback`, который будет выступать обработчиком сообщений брокера
4. В модуле `forum.py` прописать `message_handler = MessageHandler()`
5. Воркеры создаются командой `python forum.py` в консоль находясь в корневой папке проекта. (Каждая консоль с выполненной командой представляет собой один экземпляр воркера)
6. В модуле `messageSender.py`:
   - создаём класс `MessageSender`
   - для него создаём метод `__init__`, в котором устанавливаем параметры подключения к брокеру RabbitMQ
   - для него же создаём метод `send_message`, который будет отправлять сообщения в очередь RabbitMQ
7. В модуле `routes.py`:
   - вписываем вызов своего `message_sender` в `result = "Результат отправки сообщения"`
8. Если всё настроено верно, то сообщение отправится в очередь, где его возьмёт для обработки первый освободившийся воркер
9. Поздравляю, Вы прекрасны!
